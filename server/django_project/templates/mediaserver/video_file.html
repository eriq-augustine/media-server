{% extends "mediaserver/base_file.html" %}

{% load staticfiles %}

{% block additional-head %}
   <link rel="stylesheet" href="{% static 'mediaserver/style/vendor/video-js.css' %}" />
   <script src="{% static 'mediaserver/js/vendor/video.js' %}"></script>
{% endblock %}


{% block file-content %}
   <video
      id='main-video-player'
      class='video-player video-js vjs-default-skin vjs-big-play-centered'
      width='auto'
      height='auto'
      data-setup='{ "controls": true, "poster": "{{ cache.poster }}" }'
   >
      {% if cache %}
         {% if cache.encoded_video %}
            <source src='{{ path }}' type='{{ mime }}'>
         {% else %}
            <source src='{% url 'raw' path %}' type='{{ mime }}'>
         {% endif %}

         {% for subtitle in cache.subtitles %}
            <track kind="subtitles" src="{{ subtitle.url }}" srclang="{{ subtitle.lang }}" label="{{ subtitle.display }}"></track>
         {% endfor %}
      {% else %}
         <source src='{% url 'raw' path %}' type='{{ mime }}'>
      {% endif %}
      Browser not supported.
   </video>

   {% if encode %}
      <p>(This file has been re-encoded as {{ encode }}.)</p>
   {% endif %}
{% endblock %}
